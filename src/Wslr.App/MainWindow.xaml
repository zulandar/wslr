<Window x:Class="Wslr.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:Wslr.App.Views"
        xmlns:vm="clr-namespace:Wslr.UI.ViewModels;assembly=Wslr.UI"
        mc:Ignorable="d"
        Title="{Binding Title}"
        Height="600" Width="900"
        MinHeight="400" MinWidth="600"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="False"
        Closing="Window_Closing">

    <!-- Custom Window Chrome for proper window behavior -->
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32"
                      CornerRadius="8"
                      GlassFrameThickness="0"
                      ResizeBorderThickness="6"
                      UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>

    <!-- Radial Gradient Background - Mica-style ambient glow -->
    <Window.Background>
        <RadialGradientBrush GradientOrigin="0.1,0.1" Center="0.15,0.15" RadiusX="1.2" RadiusY="1.2">
            <GradientStop Color="#18667EEA" Offset="0" />
            <GradientStop Color="#10764BA2" Offset="0.35" />
            <GradientStop Color="#1A1A1A" Offset="0.7" />
        </RadialGradientBrush>
    </Window.Background>

    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:DistributionListViewModel}">
            <views:DistributionListView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:PlaceholderViewModel}">
            <views:PlaceholderView />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Custom Title Bar -->
        <Grid Grid.Row="0" Background="{StaticResource BackgroundBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="56" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Drag area over nav rail -->
            <Border Grid.Column="0" Background="Transparent" />

            <!-- Title in center area (draggable) -->
            <TextBlock Grid.Column="1"
                       Text="{Binding Title}"
                       Foreground="{StaticResource SecondaryTextBrush}"
                       FontFamily="{StaticResource MonoFontFamily}"
                       FontSize="12"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0" />

            <!-- Window Controls -->
            <StackPanel Grid.Column="2"
                        Orientation="Horizontal"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                <!-- Minimize -->
                <Button x:Name="MinimizeButton"
                        Style="{StaticResource WindowControlButtonStyle}"
                        Click="MinimizeButton_Click"
                        ToolTip="Minimize">
                    <TextBlock Text="&#xE921;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="10" />
                </Button>
                <!-- Maximize/Restore -->
                <Button x:Name="MaximizeButton"
                        Style="{StaticResource WindowControlButtonStyle}"
                        Click="MaximizeButton_Click"
                        ToolTip="Maximize">
                    <TextBlock x:Name="MaximizeIcon"
                               Text="&#xE922;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="10" />
                </Button>
                <!-- Close -->
                <Button x:Name="CloseButton"
                        Style="{StaticResource WindowControlCloseButtonStyle}"
                        Click="CloseButton_Click"
                        ToolTip="Close">
                    <TextBlock Text="&#xE8BB;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="10" />
                </Button>
            </StackPanel>
        </Grid>

        <!-- Main Content Grid -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="56" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Navigation Rail Area with Gradient Accent -->
            <Border Grid.Column="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#20667EEA" Offset="0" />
                    <GradientStop Color="#18764BA2" Offset="0.5" />
                    <GradientStop Color="#00000000" Offset="1" />
                </LinearGradientBrush>
            </Border.Background>

            <!-- Navigation Rail Content -->
            <DockPanel Margin="8,12">
                <!-- App Logo -->
                <Border DockPanel.Dock="Top"
                        Style="{StaticResource AppLogoStyle}">
                    <TextBlock Text="W"
                               Foreground="White"
                               FontFamily="{StaticResource MonoFontFamily}"
                               FontSize="18"
                               FontWeight="Bold"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center" />
                </Border>

                <!-- Settings button at bottom -->
                <Button DockPanel.Dock="Bottom"
                        Style="{StaticResource NavButtonStyle}"
                        Tag="&#xE713;"
                        Command="{Binding NavigateToSettingsCommand}"
                        ToolTip="Settings" />

                <!-- Navigation Items -->
                <StackPanel VerticalAlignment="Top">
                    <!-- Distributions -->
                    <RadioButton Style="{StaticResource NavItemStyle}"
                                 Tag="&#xF0E2;"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=0}"
                                 Command="{Binding NavigateToDistributionsCommand}"
                                 ToolTip="Distributions" />

                    <!-- Terminal -->
                    <RadioButton Style="{StaticResource NavItemStyle}"
                                 Tag="&#xE756;"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=1}"
                                 Command="{Binding NavigateToTerminalCommand}"
                                 ToolTip="Terminal" />

                    <!-- Install/Download -->
                    <RadioButton Style="{StaticResource NavItemStyle}"
                                 Tag="&#xE896;"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=2}"
                                 Command="{Binding NavigateToInstallCommand}"
                                 ToolTip="Install" />
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main Content Area with Elevated Surface Effect -->
        <Border Grid.Column="1"
                CornerRadius="12,0,0,0"
                BorderThickness="1,1,0,0"
                BorderBrush="{StaticResource BorderBrush}"
                Margin="0,0,0,0">
            <!-- Gradient overlay for elevation effect -->
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,0.15">
                    <GradientStop Color="#2A2A2A" Offset="0" />
                    <GradientStop Color="#202020" Offset="1" />
                </LinearGradientBrush>
            </Border.Background>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0"
                        Background="Transparent"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="0,0,0,1"
                        Padding="20,14">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0"
                                   Text="{Binding CurrentPageTitle}"
                                   Style="{StaticResource SubtitleTextStyle}"
                                   VerticalAlignment="Center" />

                        <StackPanel Grid.Column="1"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Right">
                            <Button Content="Minimize to Tray"
                                    Command="{Binding MinimizeToTrayCommand}"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Padding="12,6" />
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Main Content -->
                <ContentControl Grid.Row="1"
                                Content="{Binding CurrentViewModel}"
                                Margin="20,16" />

                <!-- Status Bar -->
                <Border Grid.Row="2"
                        Background="{StaticResource OverlayLight5Brush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="0,1,0,0"
                        Padding="20,10">
                    <TextBlock Text="Ready"
                               Style="{StaticResource CaptionTextStyle}" />
                </Border>
            </Grid>
        </Border>
        </Grid>
    </Grid>
</Window>
